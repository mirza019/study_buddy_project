schemaVersion: 1.2
kind: Component

metadata:
  name: study-buddy-bot
  description: Telegram bot for Study Buddy AI (always-on background worker)

build:
  env:
    - name: PIP_NO_CACHE_DIR
      value: "1"

  commands:
    - pip install --upgrade pip
    - pip install -r requirements_bot.txt

run:
  command: python bot.py

network:
  type: NONE   # background worker, no HTTP port needed

scaling:
  minReplicas: 1
  maxReplicas: 1

env:
  - name: TELEGRAM_TOKEN
    valueFrom:
      secretRef:
        name: telegram-token

  - name: GEMINI_API_KEY
    valueFrom:
      secretRef:
        name: gemini-key
